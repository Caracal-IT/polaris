{"moduleFile":{"sourceFilePath":"D:/Development/Labs/Ettiene/polaris/src/components/polaris-workflow/polaris-workflow.ts","jsFilePath":"D:/Development/Labs/Ettiene/polaris/src/components/polaris-workflow/polaris-workflow.js","cmps":[],"coreRuntimeApis":[],"collectionName":null,"dtsFilePath":null,"excludeFromCollection":false,"externalImports":[],"hasVdomAttribute":false,"hasVdomXlink":false,"hasVdomClass":false,"hasVdomFunctional":false,"hasVdomKey":false,"hasVdomListener":false,"hasVdomPropOrAttr":false,"hasVdomRef":false,"hasVdomRender":false,"hasVdomStyle":false,"hasVdomText":false,"htmlAttrNames":[],"htmlTagNames":[],"isCollectionDependency":false,"isLegacy":false,"localImports":[],"originalCollectionComponentPath":null,"originalImports":[],"potentialCmpRefs":[]},"jsText":"/*\r\nimport { Component } from \"../../model/control.model\";\r\n\r\nimport { Context } from \"../../model/context.model\";\r\nimport { HttpService } from \"../../services/http.service\";\r\nimport { ModelService } from \"../../services/model.service\";\r\nimport { ConfigService } from \"../../services/config.service\";\r\nimport { WorkflowService } from \"../../services/workflow.service\";\r\n\r\nexport class PolarisWorkflow extends HTMLElement implements Context {\r\n    static get observedAttributes() {\r\n        return ['process'];\r\n    }\r\n\r\n    private _components: Array<any> = [];\r\n\r\n    page = this;\r\n    model: ModelService = new ModelService();\r\n    http: HttpService = new HttpService(this);\r\n    config: ConfigService = new ConfigService();\r\n    wf:WorkflowService = new WorkflowService(this);\r\n    \r\n    get components() {return this._components}\r\n    set components(val) {\r\n        this._components = val||[];\r\n        this.render();\r\n    }\r\n\r\n    attributeChangedCallback(_attrName: string, _oldVal: string, _newVal: string) {\r\n        if(_attrName === \"process\")\r\n            this.load(_newVal);\r\n    }\r\n\r\n    load(process: any, next = \"start\"){\r\n        this.wf.setProcess(process, next);\r\n    }\r\n\r\n    private render() {\r\n        for(let i = this.childNodes.length - 1; i >= 0; i--)\r\n            this.removeChild(this.childNodes[i]);\r\n\r\n        this.components.forEach(this.renderComponent.bind(this, this));\r\n    }\r\n\r\n    private renderComponent(parent: HTMLElement, config: Component) {\r\n        const el = document.createElement(config.tag);\r\n        const options = {\r\n            \"wf-Workflow\": \"\",\r\n            \"ctx\": this\r\n        };\r\n\r\n        const newEl = Object.assign(el, config, options);\r\n        \r\n        if(newEl.id && newEl.value !== undefined) {\r\n            const newValue = this.model.getValue(newEl.id);\r\n\r\n            if(newValue !== undefined)\r\n                newEl.value = newValue;\r\n            \r\n            this.model.setValue(newEl.id, newEl.value);\r\n\r\n            newEl.onchange = (event: any) => this.model.setValue(event.target.id, event.target.value);\r\n        }\r\n\r\n        if(config.components)\r\n            config.components.forEach(this.renderComponent.bind(this, newEl));\r\n\r\n        parent.appendChild(newEl);\r\n    }\r\n}\r\n\r\nwindow.customElements.define('polaris-workflow', PolarisWorkflow);\r\n*/ \r\n"}